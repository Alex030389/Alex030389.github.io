svg4everybody();

// ============================================================ footer
// (function () {
//   var isIE11 = !!window.MSInputMethodContext && !!document.documentMode;

//   var stickFooter = function () {
//     var FOOTER = document.querySelector('footer');
//     var MAIN = document.querySelector('.content');
//     var BODY = document.querySelector('body');
//     var footerHeight = FOOTER.offsetHeight;
//     BODY.style.position = 'relative';
//     MAIN.style.marginBottom = footerHeight + 'px';
//     FOOTER.style.position = 'absolute';
//     FOOTER.style.bottom = '0';
//     FOOTER.style.left = '0';
//     FOOTER.style.width = '100%';
//   };

//   if (isIE11) {
//     stickFooter();
//     window.addEventListener('resize', stickFooter);
//   }
// })();

// ========================================================== hamburger

$('.header__hamburger-search-box .header__button-hamburger').click(function () {
  $('.header__main-nav').addClass('active');
  $('body').css('overflow-y', 'hidden');
})

$('.header__main-nav .header__button-hamburger').click(function () {
  $('.header__main-nav').removeClass('active');
  $('body').css('overflow-y', 'visible');
})

$(window).resize(function () {
  if ($('.header__hamburger-search-box').css('display') == 'none') {
    $('.header__main-nav').removeClass('active');
    $('body').css('overflow-y', 'visible');
  }
})


// =========================================================== search form

$('.header__button-open-search').click(function () {
  $('.header__bottom').toggleClass('active');
})

headerMainSearchVisible();

$(window).resize(headerMainSearchVisible);

function headerMainSearchVisible() {
  if ($('.header__top .header__search-form').css('display') == 'flex') {
    $('.header__bottom').removeClass('active');
  }
};


// ====================================================== start search
$('.search-form__input').on('keypress', function () {
  $('.search-form__button').fadeIn();
})

$('.search-form__input').on('blur', function () {
  if ($('.search-form__input').val() == "") {
    $('.search-form__button').fadeOut();
  }
})


$('.header__top .search-form__input').on('focus', function () {
  $('.header__top .header__search-form').css('max-width', '320px');
  $('.header__top .header__search-form').css('width', '320px');
})
$('.header__top .search-form__input').on('blur', function () {
  $('.header__top .header__search-form').css('max-width', '250px');
  $('.header__top .header__search-form').css('width', '100%');
})



// =============================================================== tabs !!!!!!!!!!!!

let tabItemArray = document.querySelectorAll('.tab__item');
let solContentList = document.querySelectorAll('.sol-content__list');

function activate(event, number) {

  for (let i = 0; i < tabItemArray.length; i++) {
    tabItemArray[i].classList.remove('active');
  }

  tabItemArray[number].classList.add('active');


  for (let ii = 0; ii < solContentList.length; ii++) {
    solContentList[ii].style.display = 'none';
  }
  solContentList[number].style.display = 'block';
}


// ather
$('form').prop('autocomplete', 'off');

// modal-deme submi
// $('.modal-demo .modal__btn').click(function() {
//   submit();
// })


// ================================================================= slick page index
if ($('.features .reviews__list').length) {
  reviewListSlick();
}

$(window).resize(function () {
  if ($('.features .reviews__list').length) {
    reviewListSlick();
  }
})

function reviewListSlick() {
  $('.features .reviews__list').slick({
    accessibility: false,
    arrows: false,
    dots: true,
    appendDots: $('.reviews__dots'),
    dotsClass: 'reviews__dots-list',
    responsive: [{
      breakpoint: 577,
      settings: "unslick"
    }]
  });
}



// =========================================================== modal

// modal
// $('.product__btn-cart').click(function() {
//   fadeInModal('.modal-discount');
// })

$('.product__btn-demo._modal').click(function () {
  fadeInModal('.modal-demo');
})

$('.course__btn-cart').on('click', function () {
  fadeInModal('.modal-premium');
  // fadeInModal('.modal-demo');
})


function fadeInModal(modal) {
  $('body').css('overflow-y', 'hidden');

  $(modal).fadeIn(200);

  $('.modal__content').click(function (e) {
    e.stopPropagation();
  })

  $('.modal__close').click(function () {
    fadeOutModal();
  })

  $('.modal').click(function () {
    fadeOutModal();
  })

  function fadeOutModal() {
    $('.modal').fadeOut(200);
    $('body').css('overflow-y', 'scroll');
  }
}

// ============================================================== product checkbox
$('.product__tr').click(function (e) {
  e.preventDefault();
  $('.product__tr').removeClass('product__tr_select');
  $(this).addClass('product__tr_select');
  $(this).find('.product__radio')[0].checked = true;
})


// ================================================================ initSlick
for (let i = 0; i < 201; i++) {
  let sl = '.sl-' + i;
  initSlick(sl);
}

function initSlick(sl) {
  let cl = '.courses__list';
  let slcl = sl + ' ' + cl;
  let sldots = sl + ' .reviews__dots'

  $(slcl).slick({
    accessibility: false,
    dots: true,
    // infinite: false,
    slidesToShow: 4,
    appendDots: sldots,
    dotsClass: 'reviews__dots-list',
    prevArrow: '<button type="button" class="slick-prev"><img src="/public/images/icon/arrow.svg"></button>',
    nextArrow: '<button type="button" class="slick-next"><img src="/public/images/icon/arrow.svg"></button>',
    // prevArrow: '<button type="button" class="slick-prev"><img src="static/img/icon/arrow.svg"></button>',
    // nextArrow: '<button type="button" class="slick-next"><img src="static/img/icon/arrow.svg"></button>',
    responsive: [{
        breakpoint: 1420,
        settings: {
          slidesToShow: 3,
        }
      },
      {
        breakpoint: 1121,
        settings: {
          slidesToShow: 2,
        }
      },
      {
        breakpoint: 780,
        settings: {
          slidesToShow: 2,
          arrows: false,
        }
      },
      {
        breakpoint: 651,
        settings: {
          slidesToShow: 1,
          centerMode: true,
          arrows: false,
          centerPadding: '150px'
        }
      },
      {
        breakpoint: 610,
        settings: {
          slidesToShow: 1,
          centerMode: true,
          arrows: false,
          centerPadding: '130px'
        }
      },
      {
        breakpoint: 577,
        settings: {
          centerMode: true,
          slidesToShow: 2,
          arrows: false,
          centerPadding: '60px',
        }
      },
      {
        breakpoint: 520,
        settings: {
          centerMode: true,
          slidesToShow: 2,
          arrows: false,
          centerPadding: '30px',
        }
      },
      {
        breakpoint: 480,
        settings: {
          centerMode: true,
          slidesToShow: 1,
          arrows: false,
          centerPadding: '120px',
        }
      },

      {
        breakpoint: 440,
        settings: {
          centerMode: true,
          slidesToShow: 1,
          arrows: false,
          centerPadding: '27%',
        }
      },
      {
        breakpoint: 410,
        settings: {
          centerMode: true,
          slidesToShow: 1,
          arrows: false,
          centerPadding: '25%',
        }
      },
      {
        breakpoint: 380,
        settings: {
          centerMode: true,
          slidesToShow: 1,
          arrows: false,
          centerPadding: '22%',
        }
      },
      {
        breakpoint: 350,
        settings: {
          slidesToShow: 1,
          arrows: false,
          centerMode: true,
          centerPadding: '20%',
        }
      },
    ]
  })

}

initSlickV2('.sl2-0');

function initSlickV2(sl) {
  let cl = '.for-this__list';
  let slcl = sl + ' ' + cl;
  let sldots = sl + ' .reviews__dots'

  $(slcl).slick({
    accessibility: false,
    dots: true,
    slidesToShow: 6,
    // infinite: false,
    appendDots: sldots,
    dotsClass: 'reviews__dots-list',
    prevArrow: '<button type="button" class="slick-prev"><img src="/public/images/icon/arrow.svg"></button>',
    nextArrow: '<button type="button" class="slick-next"><img src="/public/images/icon/arrow.svg"></button>',
    // prevArrow: '<button type="button" class="slick-prev"><img src="static/img/icon/arrow.svg"></button>',
    // nextArrow: '<button type="button" class="slick-next"><img src="static/img/icon/arrow.svg"></button>',
    responsive: [{
        breakpoint: 1420,
        settings: {
          slidesToShow: 5,
        }
      },
      {
        breakpoint: 1231,
        settings: {
          slidesToShow: 4,
        }
      },
      {
        breakpoint: 998,
        settings: {
          slidesToShow: 3,
        }
      },
      {
        breakpoint: 780,
        settings: {
          slidesToShow: 3,
          arrows: false,
        }
      },
      {
        breakpoint: 651,
        settings: {
          slidesToShow: 2,
          arrows: false,
        }
      },
      {
        breakpoint: 431,
        settings: {
          slidesToShow: 1,
          arrows: false,
          // centerMode: true,
          // centerPadding: '100px'
        }
      },
    ]
  })

}


$('.reviews__dots-list li button').empty();

$(window).resize(function () {
  $('.reviews__dots-list li button').empty();
})


// ============================================================ trim string

trimString(".for-this__h3", 65);

function trimString(string, stringLength) {
  $(string).text(function (i, text) {
    if (text.length >= stringLength) {
      stringLength -= 5;
      text = text.substring(0, stringLength);
      var lastIndex = text.lastIndexOf(" "); // позиция последнего пробела
      text = text.substring(0, lastIndex) + '...'; // обрезаем до последнего слова
    }

    $(this).text(text);

  });
}




// ================================================== rotate btn load more
$('.certific__btn-more').click(function () {
  $(this).addClass('active');

  setTimeout(function () {
    $(this).removeClass('active');
  }.bind(this), 2000);
})



// tab for-this
$('.for-this__list').on('click', '.for-this__item', function () {
  $('.for-this__item').removeClass('active');
  $(this).addClass('active');
  let idThisItem = $(this).data('id');

  switchTreckList(idThisItem);
});

function switchTreckList(id) {
  id += '';

  if ($('.track').css('display') === 'none') {
    $('.track').fadeIn(400);
  }

  $('.track__list').hide();

  var trackList = '.track__list' + '[data-id=' + id + ']';

  $(trackList).fadeIn(300);
};


// ===================================================== vendor accordion
$('.vendor__item').on('click', function (e) {
  // if (e.target.className == 'vendor__item') {
  $(this).addClass('active');
  $(this).find('.vendor__number').hide();
  $(this).find('.vendor__item-close').show();
  $(this).find('.vendor__cert').slideDown();
  // }
})

$('.vendor__item-close').on('click', function (event) {
  event.stopPropagation();
  let vendorItem = $(this).closest('.vendor__item');

  vendorItem.removeClass('active');
  vendorItem.find('.vendor__number').show();
  vendorItem.find('.vendor__item-close').hide();
  vendorItem.find('.vendor__cert').slideUp();
})

$('.vendor__h2').on('click', function (event) {
  event.stopPropagation();
})

// ========================================================== faq accordion
$('.quest__item').on('click', function () {
  if (!$(this).hasClass('active')) {
    $(this).addClass('active');
    $(this).find('.quest__answer').slideDown();
  } else {
    $(this).removeClass('active');
    $(this).find('.quest__answer').slideUp();
  }
})


// ============================================================= modal form
let formModal = $('.modal__form');
let buttonModal = $('.modal__form .modal__btn');
let inputModal = $('.modal__form .form__input');
let patternEmail = /^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i;

buttonModal.on('click', function (e) {
  e.preventDefault();

  if (patternEmail.test(inputModal.val())) {
    modalAjax();
  } else {
    inputModal.addClass('error');
    inputModal.on('keypress', function () {
      inputModal.removeClass('error');
    })
  }
})

function modalAjax() {
  let action = $('.modal__form').attr('action');
  let data = $('.modal__form').serialize();

  $.ajax({
    url: action,
    type: "POST",
    data: data,
    headers: {
      'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
    },

    success: function (response) {
      inputModal.val('');
    },
    error: function (response) {}
  })
}

// ================================================================= validate form
let regName = $('input[name="email"');
let regPassword = $('input[name="password"]');
let regPasswordConfirm = $('input[name="password_confirmation"]');

$('.register-form').submit(function (e) {
  e.preventDefault();

  let valid1 = false;
  let valid2 = false;

  if (patternEmail.test(regName.val())) {
    valid1 = true;
  } else {
    regName.addClass('error');
    regName.on('keypress', function () {
      regName.removeClass('error');
    })
  }

  if (regPassword.val() && regPasswordConfirm.val() && regPassword.val() == regPasswordConfirm.val()) {
    valid2 = true;
  } else {
    $('[type=password]').addClass('error');
    $('[type=password]').on('keypress', function () {
      $(this).removeClass('error');
    })
  }

  if (valid1 && valid2) {
    registerFormAjax();
  }
})

function registerFormAjax() {
  let action = $('.reg__form').attr('action');
  let data = $('.reg__form').serialize();

  // console.log(data);

  $.ajax({
    url: action,
    type: "POST",
    data: data,
    dataType: "json",

    headers: {
      'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
    },

    success: function (data) {
      if ($.trim(data)) {
        let respParse = JSON.parse(data);
        alert((respParse.errors.email[0]));
      } else {
        location.reload();
      }
    },

    error: function (data) {}
  })
}

// ============================================================================== request exam
	

var inputPhoneFlags = document.querySelector("#phone-flags");
window.intlTelInput(inputPhoneFlags, {
  preferredCountries: ['us'],
  defaultCountry: "auto",
  // initialCountry: 
  nationalMode: false,
  autoFormat: true,
  // separateDialCode: true
  // utilsScript: "../libs/intl-tel-input/js/utils.js",
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJzdmc0ZXZlcnlib2R5KCk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gZm9vdGVyXHJcbi8vIChmdW5jdGlvbiAoKSB7XHJcbi8vICAgdmFyIGlzSUUxMSA9ICEhd2luZG93Lk1TSW5wdXRNZXRob2RDb250ZXh0ICYmICEhZG9jdW1lbnQuZG9jdW1lbnRNb2RlO1xyXG5cclxuLy8gICB2YXIgc3RpY2tGb290ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbi8vICAgICB2YXIgRk9PVEVSID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9vdGVyJyk7XHJcbi8vICAgICB2YXIgTUFJTiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50Jyk7XHJcbi8vICAgICB2YXIgQk9EWSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcclxuLy8gICAgIHZhciBmb290ZXJIZWlnaHQgPSBGT09URVIub2Zmc2V0SGVpZ2h0O1xyXG4vLyAgICAgQk9EWS5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcbi8vICAgICBNQUlOLnN0eWxlLm1hcmdpbkJvdHRvbSA9IGZvb3RlckhlaWdodCArICdweCc7XHJcbi8vICAgICBGT09URVIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4vLyAgICAgRk9PVEVSLnN0eWxlLmJvdHRvbSA9ICcwJztcclxuLy8gICAgIEZPT1RFUi5zdHlsZS5sZWZ0ID0gJzAnO1xyXG4vLyAgICAgRk9PVEVSLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4vLyAgIH07XHJcblxyXG4vLyAgIGlmIChpc0lFMTEpIHtcclxuLy8gICAgIHN0aWNrRm9vdGVyKCk7XHJcbi8vICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgc3RpY2tGb290ZXIpO1xyXG4vLyAgIH1cclxuLy8gfSkoKTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gaGFtYnVyZ2VyXHJcblxyXG4kKCcuaGVhZGVyX19oYW1idXJnZXItc2VhcmNoLWJveCAuaGVhZGVyX19idXR0b24taGFtYnVyZ2VyJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICQoJy5oZWFkZXJfX21haW4tbmF2JykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93LXknLCAnaGlkZGVuJyk7XHJcbn0pXHJcblxyXG4kKCcuaGVhZGVyX19tYWluLW5hdiAuaGVhZGVyX19idXR0b24taGFtYnVyZ2VyJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICQoJy5oZWFkZXJfX21haW4tbmF2JykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93LXknLCAndmlzaWJsZScpO1xyXG59KVxyXG5cclxuJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbiAoKSB7XHJcbiAgaWYgKCQoJy5oZWFkZXJfX2hhbWJ1cmdlci1zZWFyY2gtYm94JykuY3NzKCdkaXNwbGF5JykgPT0gJ25vbmUnKSB7XHJcbiAgICAkKCcuaGVhZGVyX19tYWluLW5hdicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93LXknLCAndmlzaWJsZScpO1xyXG4gIH1cclxufSlcclxuXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBzZWFyY2ggZm9ybVxyXG5cclxuJCgnLmhlYWRlcl9fYnV0dG9uLW9wZW4tc2VhcmNoJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICQoJy5oZWFkZXJfX2JvdHRvbScpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxufSlcclxuXHJcbmhlYWRlck1haW5TZWFyY2hWaXNpYmxlKCk7XHJcblxyXG4kKHdpbmRvdykucmVzaXplKGhlYWRlck1haW5TZWFyY2hWaXNpYmxlKTtcclxuXHJcbmZ1bmN0aW9uIGhlYWRlck1haW5TZWFyY2hWaXNpYmxlKCkge1xyXG4gIGlmICgkKCcuaGVhZGVyX190b3AgLmhlYWRlcl9fc2VhcmNoLWZvcm0nKS5jc3MoJ2Rpc3BsYXknKSA9PSAnZmxleCcpIHtcclxuICAgICQoJy5oZWFkZXJfX2JvdHRvbScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IHN0YXJ0IHNlYXJjaFxyXG4kKCcuc2VhcmNoLWZvcm1fX2lucHV0Jykub24oJ2tleXByZXNzJywgZnVuY3Rpb24gKCkge1xyXG4gICQoJy5zZWFyY2gtZm9ybV9fYnV0dG9uJykuZmFkZUluKCk7XHJcbn0pXHJcblxyXG4kKCcuc2VhcmNoLWZvcm1fX2lucHV0Jykub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgaWYgKCQoJy5zZWFyY2gtZm9ybV9faW5wdXQnKS52YWwoKSA9PSBcIlwiKSB7XHJcbiAgICAkKCcuc2VhcmNoLWZvcm1fX2J1dHRvbicpLmZhZGVPdXQoKTtcclxuICB9XHJcbn0pXHJcblxyXG5cclxuJCgnLmhlYWRlcl9fdG9wIC5zZWFyY2gtZm9ybV9faW5wdXQnKS5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgJCgnLmhlYWRlcl9fdG9wIC5oZWFkZXJfX3NlYXJjaC1mb3JtJykuY3NzKCdtYXgtd2lkdGgnLCAnMzIwcHgnKTtcclxuICAkKCcuaGVhZGVyX190b3AgLmhlYWRlcl9fc2VhcmNoLWZvcm0nKS5jc3MoJ3dpZHRoJywgJzMyMHB4Jyk7XHJcbn0pXHJcbiQoJy5oZWFkZXJfX3RvcCAuc2VhcmNoLWZvcm1fX2lucHV0Jykub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgJCgnLmhlYWRlcl9fdG9wIC5oZWFkZXJfX3NlYXJjaC1mb3JtJykuY3NzKCdtYXgtd2lkdGgnLCAnMjUwcHgnKTtcclxuICAkKCcuaGVhZGVyX190b3AgLmhlYWRlcl9fc2VhcmNoLWZvcm0nKS5jc3MoJ3dpZHRoJywgJzEwMCUnKTtcclxufSlcclxuXHJcblxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IHRhYnMgISEhISEhISEhISEhXHJcblxyXG5sZXQgdGFiSXRlbUFycmF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYl9faXRlbScpO1xyXG5sZXQgc29sQ29udGVudExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc29sLWNvbnRlbnRfX2xpc3QnKTtcclxuXHJcbmZ1bmN0aW9uIGFjdGl2YXRlKGV2ZW50LCBudW1iZXIpIHtcclxuXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YWJJdGVtQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgIHRhYkl0ZW1BcnJheVtpXS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICB9XHJcblxyXG4gIHRhYkl0ZW1BcnJheVtudW1iZXJdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG5cclxuXHJcbiAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IHNvbENvbnRlbnRMaXN0Lmxlbmd0aDsgaWkrKykge1xyXG4gICAgc29sQ29udGVudExpc3RbaWldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgfVxyXG4gIHNvbENvbnRlbnRMaXN0W251bWJlcl0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbn1cclxuXHJcblxyXG4vLyBhdGhlclxyXG4kKCdmb3JtJykucHJvcCgnYXV0b2NvbXBsZXRlJywgJ29mZicpO1xyXG5cclxuLy8gbW9kYWwtZGVtZSBzdWJtaVxyXG4vLyAkKCcubW9kYWwtZGVtbyAubW9kYWxfX2J0bicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4vLyAgIHN1Ym1pdCgpO1xyXG4vLyB9KVxyXG5cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IHNsaWNrIHBhZ2UgaW5kZXhcclxuaWYgKCQoJy5mZWF0dXJlcyAucmV2aWV3c19fbGlzdCcpLmxlbmd0aCkge1xyXG4gIHJldmlld0xpc3RTbGljaygpO1xyXG59XHJcblxyXG4kKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcclxuICBpZiAoJCgnLmZlYXR1cmVzIC5yZXZpZXdzX19saXN0JykubGVuZ3RoKSB7XHJcbiAgICByZXZpZXdMaXN0U2xpY2soKTtcclxuICB9XHJcbn0pXHJcblxyXG5mdW5jdGlvbiByZXZpZXdMaXN0U2xpY2soKSB7XHJcbiAgJCgnLmZlYXR1cmVzIC5yZXZpZXdzX19saXN0Jykuc2xpY2soe1xyXG4gICAgYWNjZXNzaWJpbGl0eTogZmFsc2UsXHJcbiAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgZG90czogdHJ1ZSxcclxuICAgIGFwcGVuZERvdHM6ICQoJy5yZXZpZXdzX19kb3RzJyksXHJcbiAgICBkb3RzQ2xhc3M6ICdyZXZpZXdzX19kb3RzLWxpc3QnLFxyXG4gICAgcmVzcG9uc2l2ZTogW3tcclxuICAgICAgYnJlYWtwb2ludDogNTc3LFxyXG4gICAgICBzZXR0aW5nczogXCJ1bnNsaWNrXCJcclxuICAgIH1dXHJcbiAgfSk7XHJcbn1cclxuXHJcblxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gbW9kYWxcclxuXHJcbi8vIG1vZGFsXHJcbi8vICQoJy5wcm9kdWN0X19idG4tY2FydCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4vLyAgIGZhZGVJbk1vZGFsKCcubW9kYWwtZGlzY291bnQnKTtcclxuLy8gfSlcclxuXHJcbiQoJy5wcm9kdWN0X19idG4tZGVtby5fbW9kYWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgZmFkZUluTW9kYWwoJy5tb2RhbC1kZW1vJyk7XHJcbn0pXHJcblxyXG4kKCcuY291cnNlX19idG4tY2FydCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICBmYWRlSW5Nb2RhbCgnLm1vZGFsLXByZW1pdW0nKTtcclxuICAvLyBmYWRlSW5Nb2RhbCgnLm1vZGFsLWRlbW8nKTtcclxufSlcclxuXHJcblxyXG5mdW5jdGlvbiBmYWRlSW5Nb2RhbChtb2RhbCkge1xyXG4gICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93LXknLCAnaGlkZGVuJyk7XHJcblxyXG4gICQobW9kYWwpLmZhZGVJbigyMDApO1xyXG5cclxuICAkKCcubW9kYWxfX2NvbnRlbnQnKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICB9KVxyXG5cclxuICAkKCcubW9kYWxfX2Nsb3NlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgZmFkZU91dE1vZGFsKCk7XHJcbiAgfSlcclxuXHJcbiAgJCgnLm1vZGFsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgZmFkZU91dE1vZGFsKCk7XHJcbiAgfSlcclxuXHJcbiAgZnVuY3Rpb24gZmFkZU91dE1vZGFsKCkge1xyXG4gICAgJCgnLm1vZGFsJykuZmFkZU91dCgyMDApO1xyXG4gICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cteScsICdzY3JvbGwnKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IHByb2R1Y3QgY2hlY2tib3hcclxuJCgnLnByb2R1Y3RfX3RyJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgJCgnLnByb2R1Y3RfX3RyJykucmVtb3ZlQ2xhc3MoJ3Byb2R1Y3RfX3RyX3NlbGVjdCcpO1xyXG4gICQodGhpcykuYWRkQ2xhc3MoJ3Byb2R1Y3RfX3RyX3NlbGVjdCcpO1xyXG4gICQodGhpcykuZmluZCgnLnByb2R1Y3RfX3JhZGlvJylbMF0uY2hlY2tlZCA9IHRydWU7XHJcbn0pXHJcblxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBpbml0U2xpY2tcclxuZm9yIChsZXQgaSA9IDA7IGkgPCAyMDE7IGkrKykge1xyXG4gIGxldCBzbCA9ICcuc2wtJyArIGk7XHJcbiAgaW5pdFNsaWNrKHNsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdFNsaWNrKHNsKSB7XHJcbiAgbGV0IGNsID0gJy5jb3Vyc2VzX19saXN0JztcclxuICBsZXQgc2xjbCA9IHNsICsgJyAnICsgY2w7XHJcbiAgbGV0IHNsZG90cyA9IHNsICsgJyAucmV2aWV3c19fZG90cydcclxuXHJcbiAgJChzbGNsKS5zbGljayh7XHJcbiAgICBhY2Nlc3NpYmlsaXR5OiBmYWxzZSxcclxuICAgIGRvdHM6IHRydWUsXHJcbiAgICAvLyBpbmZpbml0ZTogZmFsc2UsXHJcbiAgICBzbGlkZXNUb1Nob3c6IDQsXHJcbiAgICBhcHBlbmREb3RzOiBzbGRvdHMsXHJcbiAgICBkb3RzQ2xhc3M6ICdyZXZpZXdzX19kb3RzLWxpc3QnLFxyXG4gICAgcHJldkFycm93OiAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJzbGljay1wcmV2XCI+PGltZyBzcmM9XCIvcHVibGljL2ltYWdlcy9pY29uL2Fycm93LnN2Z1wiPjwvYnV0dG9uPicsXHJcbiAgICBuZXh0QXJyb3c6ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInNsaWNrLW5leHRcIj48aW1nIHNyYz1cIi9wdWJsaWMvaW1hZ2VzL2ljb24vYXJyb3cuc3ZnXCI+PC9idXR0b24+JyxcclxuICAgIC8vIHByZXZBcnJvdzogJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwic2xpY2stcHJldlwiPjxpbWcgc3JjPVwic3RhdGljL2ltZy9pY29uL2Fycm93LnN2Z1wiPjwvYnV0dG9uPicsXHJcbiAgICAvLyBuZXh0QXJyb3c6ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInNsaWNrLW5leHRcIj48aW1nIHNyYz1cInN0YXRpYy9pbWcvaWNvbi9hcnJvdy5zdmdcIj48L2J1dHRvbj4nLFxyXG4gICAgcmVzcG9uc2l2ZTogW3tcclxuICAgICAgICBicmVha3BvaW50OiAxNDIwLFxyXG4gICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgYnJlYWtwb2ludDogMTEyMSxcclxuICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGJyZWFrcG9pbnQ6IDc4MCxcclxuICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxyXG4gICAgICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBicmVha3BvaW50OiA2NTEsXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcclxuICAgICAgICAgIGNlbnRlck1vZGU6IHRydWUsXHJcbiAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICAgICAgY2VudGVyUGFkZGluZzogJzE1MHB4J1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGJyZWFrcG9pbnQ6IDYxMCxcclxuICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxyXG4gICAgICAgICAgY2VudGVyTW9kZTogdHJ1ZSxcclxuICAgICAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgICAgICBjZW50ZXJQYWRkaW5nOiAnMTMwcHgnXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgYnJlYWtwb2ludDogNTc3LFxyXG4gICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICBjZW50ZXJNb2RlOiB0cnVlLFxyXG4gICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxyXG4gICAgICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgICAgIGNlbnRlclBhZGRpbmc6ICc2MHB4JyxcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBicmVha3BvaW50OiA1MjAsXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgIGNlbnRlck1vZGU6IHRydWUsXHJcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXHJcbiAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICAgICAgY2VudGVyUGFkZGluZzogJzMwcHgnLFxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGJyZWFrcG9pbnQ6IDQ4MCxcclxuICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgY2VudGVyTW9kZTogdHJ1ZSxcclxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcclxuICAgICAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgICAgICBjZW50ZXJQYWRkaW5nOiAnMTIwcHgnLFxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIHtcclxuICAgICAgICBicmVha3BvaW50OiA0NDAsXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgIGNlbnRlck1vZGU6IHRydWUsXHJcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICAgICAgY2VudGVyUGFkZGluZzogJzI3JScsXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgYnJlYWtwb2ludDogNDEwLFxyXG4gICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICBjZW50ZXJNb2RlOiB0cnVlLFxyXG4gICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxyXG4gICAgICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgICAgIGNlbnRlclBhZGRpbmc6ICcyNSUnLFxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGJyZWFrcG9pbnQ6IDM4MCxcclxuICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgY2VudGVyTW9kZTogdHJ1ZSxcclxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcclxuICAgICAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgICAgICBjZW50ZXJQYWRkaW5nOiAnMjIlJyxcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBicmVha3BvaW50OiAzNTAsXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcclxuICAgICAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgICAgICBjZW50ZXJNb2RlOiB0cnVlLFxyXG4gICAgICAgICAgY2VudGVyUGFkZGluZzogJzIwJScsXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgXVxyXG4gIH0pXHJcblxyXG59XHJcblxyXG5pbml0U2xpY2tWMignLnNsMi0wJyk7XHJcblxyXG5mdW5jdGlvbiBpbml0U2xpY2tWMihzbCkge1xyXG4gIGxldCBjbCA9ICcuZm9yLXRoaXNfX2xpc3QnO1xyXG4gIGxldCBzbGNsID0gc2wgKyAnICcgKyBjbDtcclxuICBsZXQgc2xkb3RzID0gc2wgKyAnIC5yZXZpZXdzX19kb3RzJ1xyXG5cclxuICAkKHNsY2wpLnNsaWNrKHtcclxuICAgIGFjY2Vzc2liaWxpdHk6IGZhbHNlLFxyXG4gICAgZG90czogdHJ1ZSxcclxuICAgIHNsaWRlc1RvU2hvdzogNixcclxuICAgIC8vIGluZmluaXRlOiBmYWxzZSxcclxuICAgIGFwcGVuZERvdHM6IHNsZG90cyxcclxuICAgIGRvdHNDbGFzczogJ3Jldmlld3NfX2RvdHMtbGlzdCcsXHJcbiAgICBwcmV2QXJyb3c6ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInNsaWNrLXByZXZcIj48aW1nIHNyYz1cIi9wdWJsaWMvaW1hZ2VzL2ljb24vYXJyb3cuc3ZnXCI+PC9idXR0b24+JyxcclxuICAgIG5leHRBcnJvdzogJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwic2xpY2stbmV4dFwiPjxpbWcgc3JjPVwiL3B1YmxpYy9pbWFnZXMvaWNvbi9hcnJvdy5zdmdcIj48L2J1dHRvbj4nLFxyXG4gICAgLy8gcHJldkFycm93OiAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJzbGljay1wcmV2XCI+PGltZyBzcmM9XCJzdGF0aWMvaW1nL2ljb24vYXJyb3cuc3ZnXCI+PC9idXR0b24+JyxcclxuICAgIC8vIG5leHRBcnJvdzogJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwic2xpY2stbmV4dFwiPjxpbWcgc3JjPVwic3RhdGljL2ltZy9pY29uL2Fycm93LnN2Z1wiPjwvYnV0dG9uPicsXHJcbiAgICByZXNwb25zaXZlOiBbe1xyXG4gICAgICAgIGJyZWFrcG9pbnQ6IDE0MjAsXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogNSxcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBicmVha3BvaW50OiAxMjMxLFxyXG4gICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDQsXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgYnJlYWtwb2ludDogOTk4LFxyXG4gICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgYnJlYWtwb2ludDogNzgwLFxyXG4gICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXHJcbiAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGJyZWFrcG9pbnQ6IDY1MSxcclxuICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxyXG4gICAgICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBicmVha3BvaW50OiA0MzEsXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcclxuICAgICAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgICAgICAvLyBjZW50ZXJNb2RlOiB0cnVlLFxyXG4gICAgICAgICAgLy8gY2VudGVyUGFkZGluZzogJzEwMHB4J1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIF1cclxuICB9KVxyXG5cclxufVxyXG5cclxuXHJcbiQoJy5yZXZpZXdzX19kb3RzLWxpc3QgbGkgYnV0dG9uJykuZW1wdHkoKTtcclxuXHJcbiQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xyXG4gICQoJy5yZXZpZXdzX19kb3RzLWxpc3QgbGkgYnV0dG9uJykuZW1wdHkoKTtcclxufSlcclxuXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gdHJpbSBzdHJpbmdcclxuXHJcbnRyaW1TdHJpbmcoXCIuZm9yLXRoaXNfX2gzXCIsIDY1KTtcclxuXHJcbmZ1bmN0aW9uIHRyaW1TdHJpbmcoc3RyaW5nLCBzdHJpbmdMZW5ndGgpIHtcclxuICAkKHN0cmluZykudGV4dChmdW5jdGlvbiAoaSwgdGV4dCkge1xyXG4gICAgaWYgKHRleHQubGVuZ3RoID49IHN0cmluZ0xlbmd0aCkge1xyXG4gICAgICBzdHJpbmdMZW5ndGggLT0gNTtcclxuICAgICAgdGV4dCA9IHRleHQuc3Vic3RyaW5nKDAsIHN0cmluZ0xlbmd0aCk7XHJcbiAgICAgIHZhciBsYXN0SW5kZXggPSB0ZXh0Lmxhc3RJbmRleE9mKFwiIFwiKTsgLy8g0L/QvtC30LjRhtC40Y8g0L/QvtGB0LvQtdC00L3QtdCz0L4g0L/RgNC+0LHQtdC70LBcclxuICAgICAgdGV4dCA9IHRleHQuc3Vic3RyaW5nKDAsIGxhc3RJbmRleCkgKyAnLi4uJzsgLy8g0L7QsdGA0LXQt9Cw0LXQvCDQtNC+INC/0L7RgdC70LXQtNC90LXQs9C+INGB0LvQvtCy0LBcclxuICAgIH1cclxuXHJcbiAgICAkKHRoaXMpLnRleHQodGV4dCk7XHJcblxyXG4gIH0pO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSByb3RhdGUgYnRuIGxvYWQgbW9yZVxyXG4kKCcuY2VydGlmaWNfX2J0bi1tb3JlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gIH0uYmluZCh0aGlzKSwgMjAwMCk7XHJcbn0pXHJcblxyXG5cclxuXHJcbi8vIHRhYiBmb3ItdGhpc1xyXG4kKCcuZm9yLXRoaXNfX2xpc3QnKS5vbignY2xpY2snLCAnLmZvci10aGlzX19pdGVtJywgZnVuY3Rpb24gKCkge1xyXG4gICQoJy5mb3ItdGhpc19faXRlbScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICBsZXQgaWRUaGlzSXRlbSA9ICQodGhpcykuZGF0YSgnaWQnKTtcclxuXHJcbiAgc3dpdGNoVHJlY2tMaXN0KGlkVGhpc0l0ZW0pO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIHN3aXRjaFRyZWNrTGlzdChpZCkge1xyXG4gIGlkICs9ICcnO1xyXG5cclxuICBpZiAoJCgnLnRyYWNrJykuY3NzKCdkaXNwbGF5JykgPT09ICdub25lJykge1xyXG4gICAgJCgnLnRyYWNrJykuZmFkZUluKDQwMCk7XHJcbiAgfVxyXG5cclxuICAkKCcudHJhY2tfX2xpc3QnKS5oaWRlKCk7XHJcblxyXG4gIHZhciB0cmFja0xpc3QgPSAnLnRyYWNrX19saXN0JyArICdbZGF0YS1pZD0nICsgaWQgKyAnXSc7XHJcblxyXG4gICQodHJhY2tMaXN0KS5mYWRlSW4oMzAwKTtcclxufTtcclxuXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSB2ZW5kb3IgYWNjb3JkaW9uXHJcbiQoJy52ZW5kb3JfX2l0ZW0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gIC8vIGlmIChlLnRhcmdldC5jbGFzc05hbWUgPT0gJ3ZlbmRvcl9faXRlbScpIHtcclxuICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAkKHRoaXMpLmZpbmQoJy52ZW5kb3JfX251bWJlcicpLmhpZGUoKTtcclxuICAkKHRoaXMpLmZpbmQoJy52ZW5kb3JfX2l0ZW0tY2xvc2UnKS5zaG93KCk7XHJcbiAgJCh0aGlzKS5maW5kKCcudmVuZG9yX19jZXJ0Jykuc2xpZGVEb3duKCk7XHJcbiAgLy8gfVxyXG59KVxyXG5cclxuJCgnLnZlbmRvcl9faXRlbS1jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIGxldCB2ZW5kb3JJdGVtID0gJCh0aGlzKS5jbG9zZXN0KCcudmVuZG9yX19pdGVtJyk7XHJcblxyXG4gIHZlbmRvckl0ZW0ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gIHZlbmRvckl0ZW0uZmluZCgnLnZlbmRvcl9fbnVtYmVyJykuc2hvdygpO1xyXG4gIHZlbmRvckl0ZW0uZmluZCgnLnZlbmRvcl9faXRlbS1jbG9zZScpLmhpZGUoKTtcclxuICB2ZW5kb3JJdGVtLmZpbmQoJy52ZW5kb3JfX2NlcnQnKS5zbGlkZVVwKCk7XHJcbn0pXHJcblxyXG4kKCcudmVuZG9yX19oMicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG59KVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBmYXEgYWNjb3JkaW9uXHJcbiQoJy5xdWVzdF9faXRlbScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICQodGhpcykuZmluZCgnLnF1ZXN0X19hbnN3ZXInKS5zbGlkZURvd24oKTtcclxuICB9IGVsc2Uge1xyXG4gICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkKHRoaXMpLmZpbmQoJy5xdWVzdF9fYW5zd2VyJykuc2xpZGVVcCgpO1xyXG4gIH1cclxufSlcclxuXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IG1vZGFsIGZvcm1cclxubGV0IGZvcm1Nb2RhbCA9ICQoJy5tb2RhbF9fZm9ybScpO1xyXG5sZXQgYnV0dG9uTW9kYWwgPSAkKCcubW9kYWxfX2Zvcm0gLm1vZGFsX19idG4nKTtcclxubGV0IGlucHV0TW9kYWwgPSAkKCcubW9kYWxfX2Zvcm0gLmZvcm1fX2lucHV0Jyk7XHJcbmxldCBwYXR0ZXJuRW1haWwgPSAvXihbYS16MC05X1xcLi1dKStAW2EtejAtOS1dK1xcLihbYS16XXsyLDR9XFwuKT9bYS16XXsyLDR9JC9pO1xyXG5cclxuYnV0dG9uTW9kYWwub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gIGlmIChwYXR0ZXJuRW1haWwudGVzdChpbnB1dE1vZGFsLnZhbCgpKSkge1xyXG4gICAgbW9kYWxBamF4KCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGlucHV0TW9kYWwuYWRkQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICBpbnB1dE1vZGFsLm9uKCdrZXlwcmVzcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgaW5wdXRNb2RhbC5yZW1vdmVDbGFzcygnZXJyb3InKTtcclxuICAgIH0pXHJcbiAgfVxyXG59KVxyXG5cclxuZnVuY3Rpb24gbW9kYWxBamF4KCkge1xyXG4gIGxldCBhY3Rpb24gPSAkKCcubW9kYWxfX2Zvcm0nKS5hdHRyKCdhY3Rpb24nKTtcclxuICBsZXQgZGF0YSA9ICQoJy5tb2RhbF9fZm9ybScpLnNlcmlhbGl6ZSgpO1xyXG5cclxuICAkLmFqYXgoe1xyXG4gICAgdXJsOiBhY3Rpb24sXHJcbiAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgIGRhdGE6IGRhdGEsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICdYLUNTUkYtVE9LRU4nOiAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpXHJcbiAgICB9LFxyXG5cclxuICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICBpbnB1dE1vZGFsLnZhbCgnJyk7XHJcbiAgICB9LFxyXG4gICAgZXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkge31cclxuICB9KVxyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSB2YWxpZGF0ZSBmb3JtXHJcbmxldCByZWdOYW1lID0gJCgnaW5wdXRbbmFtZT1cImVtYWlsXCInKTtcclxubGV0IHJlZ1Bhc3N3b3JkID0gJCgnaW5wdXRbbmFtZT1cInBhc3N3b3JkXCJdJyk7XHJcbmxldCByZWdQYXNzd29yZENvbmZpcm0gPSAkKCdpbnB1dFtuYW1lPVwicGFzc3dvcmRfY29uZmlybWF0aW9uXCJdJyk7XHJcblxyXG4kKCcucmVnaXN0ZXItZm9ybScpLnN1Ym1pdChmdW5jdGlvbiAoZSkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgbGV0IHZhbGlkMSA9IGZhbHNlO1xyXG4gIGxldCB2YWxpZDIgPSBmYWxzZTtcclxuXHJcbiAgaWYgKHBhdHRlcm5FbWFpbC50ZXN0KHJlZ05hbWUudmFsKCkpKSB7XHJcbiAgICB2YWxpZDEgPSB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZWdOYW1lLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgcmVnTmFtZS5vbigna2V5cHJlc3MnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHJlZ05hbWUucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgaWYgKHJlZ1Bhc3N3b3JkLnZhbCgpICYmIHJlZ1Bhc3N3b3JkQ29uZmlybS52YWwoKSAmJiByZWdQYXNzd29yZC52YWwoKSA9PSByZWdQYXNzd29yZENvbmZpcm0udmFsKCkpIHtcclxuICAgIHZhbGlkMiA9IHRydWU7XHJcbiAgfSBlbHNlIHtcclxuICAgICQoJ1t0eXBlPXBhc3N3b3JkXScpLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgJCgnW3R5cGU9cGFzc3dvcmRdJykub24oJ2tleXByZXNzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGlmICh2YWxpZDEgJiYgdmFsaWQyKSB7XHJcbiAgICByZWdpc3RlckZvcm1BamF4KCk7XHJcbiAgfVxyXG59KVxyXG5cclxuZnVuY3Rpb24gcmVnaXN0ZXJGb3JtQWpheCgpIHtcclxuICBsZXQgYWN0aW9uID0gJCgnLnJlZ19fZm9ybScpLmF0dHIoJ2FjdGlvbicpO1xyXG4gIGxldCBkYXRhID0gJCgnLnJlZ19fZm9ybScpLnNlcmlhbGl6ZSgpO1xyXG5cclxuICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcbiAgJC5hamF4KHtcclxuICAgIHVybDogYWN0aW9uLFxyXG4gICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICBkYXRhOiBkYXRhLFxyXG4gICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG5cclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcclxuICAgIH0sXHJcblxyXG4gICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgaWYgKCQudHJpbShkYXRhKSkge1xyXG4gICAgICAgIGxldCByZXNwUGFyc2UgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgICAgIGFsZXJ0KChyZXNwUGFyc2UuZXJyb3JzLmVtYWlsWzBdKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7fVxyXG4gIH0pXHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSByZXF1ZXN0IGV4YW1cclxuXHRcclxuXHJcbnZhciBpbnB1dFBob25lRmxhZ3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Bob25lLWZsYWdzXCIpO1xyXG53aW5kb3cuaW50bFRlbElucHV0KGlucHV0UGhvbmVGbGFncywge1xyXG4gIHByZWZlcnJlZENvdW50cmllczogWyd1cyddLFxyXG4gIGRlZmF1bHRDb3VudHJ5OiBcImF1dG9cIixcclxuICAvLyBpbml0aWFsQ291bnRyeTogXHJcbiAgbmF0aW9uYWxNb2RlOiBmYWxzZSxcclxuICBhdXRvRm9ybWF0OiB0cnVlLFxyXG4gIC8vIHNlcGFyYXRlRGlhbENvZGU6IHRydWVcclxuICAvLyB1dGlsc1NjcmlwdDogXCIuLi9saWJzL2ludGwtdGVsLWlucHV0L2pzL3V0aWxzLmpzXCIsXHJcbn0pO1xyXG4iXX0=
